{{ template "head" . }}
{{ template "nav" . }}
<main id="results" class="flow2">
    <h1>{{ .Data.Title }} {{ if ne .Data.Site "" }} for {{ .Data.Site }} {{ end }}</h1>

    <form method="GET" class="search">
        <label for="search">Search {{ .SiteName }} </label>
        <span class="search__input">
            <input type="search" minlength="1" required name="q" placeholder="Search" value="{{ .Data.Query }}" class="search-box" id="search" maxlength="6000">
            {{ if ne .Data.Site "" }} 
                <input type="hidden" value="{{ .Data.Site }}" name="site">
            {{ end }}
            <button type="submit" class="search__button" aria-label="Search" title="Search">
            <svg height="42" width="30" version="1.1" id="_x32_" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="-50 0 700 480" xml:space="preserve" fill="#1a1a1a" stroke="#1a1a1a" stroke-width="0.00512"><g id="SVGRepo_bgCarrier" stroke-width="0"><rect x="-51.2" y="-51.2" width="614.40" height="614.40" rx="307.2" fill="#fefefe1a1a1a" strokewidth="0"></rect></g><g id="SVGRepo_tracerCarrier" stroke-linecap="round" stroke-linejoin="round"></g><g id="SVGRepo_iconCarrier"> <style type="text/css"> .st0{fill:#fefefe;} </style> <g> <path class="st0" d="M193.945,399.491c0,26.182,0,45.436,0,59.754c0,27.928,12.4,52.755,62.054,52.755 c49.655,0,62.054-24.827,62.054-52.755c0-14.318,0-33.572,0-59.754c-20,2.509-40.727,3.9-62.054,3.9 C234.673,403.391,213.945,402,193.945,399.491z"></path> <path class="st0" d="M493.382,203.663C446.836,123.973,367.709,0,256,0C144.291,0,65.164,123.973,18.618,203.663 c-46.546,79.701,60.509,171.8,237.382,171.8C432.873,375.464,539.927,283.364,493.382,203.663z M106.673,279.273 c-24.637,0-44.609-19.973-44.609-44.6c0-24.646,19.972-44.609,44.609-44.609c24.627,0,44.6,19.964,44.6,44.609 C151.273,259.3,131.3,279.273,106.673,279.273z M194.718,127.618c0-28.5,23.1-51.591,51.591-51.591 c28.481,0,51.582,23.091,51.582,51.591c0,28.482-23.101,51.582-51.582,51.582C217.818,179.2,194.718,156.1,194.718,127.618z M282.764,328.146c-21.209,0-38.4-17.191-38.4-38.4c0-21.209,17.191-38.4,38.4-38.4c21.209,0,38.4,17.191,38.4,38.4 C321.164,310.954,303.973,328.146,282.764,328.146z M421.009,262.7c-22.174-3.59-38.492-25.064-34.964-46.891 c3.401-20.991,23.691-32.208,44.054-26.172c18.955,5.627,32.046,24.618,30.328,43.337 C458.645,252.345,441.554,266.027,421.009,262.7z"></path> </g> </g></svg>
            </button>
        </span>
    </form>
    {{ if ne .Data.Site "" }} 
     <!-- add a button to clear the search results if a site:<domain> param has been used -->
        <form method="GET" class="search">
            <span class="search__input">
                <input type="hidden" minlength="1" required name="q" placeholder="Search" value="{{ .Data.Query }}" class="search-box" id="search">
                <button type="submit" value="clear" name="clear">Clear</button>
                </button>
            </span>
        </form>
    {{ else }}
        <nav>
            <ul class="result-nav-list">
                <li title="content from webring sites only"
                    class="{{ if .Data.IsInternal }} result__current {{ end }}">
                    <a href="/?q={{ .Data.Query }}">Webring</a>
                </li>
                <li title="content linked from webring sites, but which reside outside it"
                    class="{{ if .Data.IsInternal | not }} result__current {{ end }}">
                    <a href="/outgoing?q={{ .Data.Query }}">Outgoing</a>
                </li>
            </ul>
        </nav>
    {{ end }}
    <article>
        <ul role="list" class="flow2 two-columns width-126ch">
        {{ range $index, $a := .Data.Pages }}
            <li class="entry">
                <a aria-described-by="link-{{ $index }}" class="entry__link" href="{{ .URL }}">{{ .Title }}</a>
                {{ if $.Data.IsInternal }}
                <span class="entry__depth">Depth: {{ .Depth }}</span>
                {{ end }}
                <p id="link-{{ $index }}" class="entry__text">{{ .About }}</p>
            </li>
        {{ end }}
        </ul>
    </article>
{{ template "footer" . }}
